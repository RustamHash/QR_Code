# Настройка Timeweb Cloud MCP Server для автоматизации развертывания

## Что это такое?

[Timeweb Cloud MCP Server](https://github.com/timeweb-cloud/mcp-server) - это инструмент для автоматизации создания и развертывания приложений в Timeweb Cloud через Model Context Protocol (MCP).

## Преимущества

- ✅ Автоматическое определение типа приложения и фреймворка
- ✅ Создание приложений в Timeweb Cloud через AI-ассистента
- ✅ Интеграция с Git репозиториями
- ✅ Упрощение процесса развертывания

## Установка и настройка

### Шаг 1: Получение API токена Timeweb Cloud

1. Войдите в панель управления Timeweb Cloud: https://timeweb.cloud/
2. Перейдите в раздел **API** или **Настройки API**
3. Создайте новый API токен
4. Скопируйте токен (он понадобится для настройки)

### Шаг 2: Установка Node.js (если не установлен)

MCP сервер требует Node.js для работы через `npx`:

```powershell
# Проверка наличия Node.js
node --version

# Если не установлен, скачайте с https://nodejs.org/
```

### Шаг 3: Настройка MCP сервера в Cursor

Файл `.cursor/mcp.json` уже создан. Откройте его и замените `your-api-token-here` на ваш реальный API токен:

```json
{
  "mcpServers": {
    "timeweb-mcp-server": {
      "command": "npx",
      "args": ["timeweb-mcp-server"],
      "env": {
        "TIMEWEB_TOKEN": "ваш_реальный_токен_здесь"
      }
    }
  }
}
```

### Шаг 4: Перезапуск Cursor

После настройки перезапустите Cursor, чтобы MCP сервер загрузился.

## Использование

После настройки вы можете использовать AI-ассистента для автоматического развертывания:

### Примеры команд:

1. **"Запусти мое приложение в Timeweb Cloud"**
   - MCP сервер автоматически определит, что это Python приложение
   - Создаст приложение в Timeweb Cloud
   - Настроит деплой

2. **"Создай приложение для моего Telegram бота в Timeweb"**
   - Определит тип приложения
   - Настроит необходимые параметры

3. **"Разверни QR Code Bot в Timeweb Cloud"**
   - Использует информацию о проекте
   - Создаст приложение с правильными настройками

## Доступные инструменты MCP сервера

### Основные инструменты:

- `create_timeweb_app` - Создает приложение в Timeweb Cloud
- `add_vcs_provider` - Добавляет VCS провайдер (GitHub, GitLab и т.д.)
- `get_vcs_providers` - Получает список VCS провайдеров
- `get_vcs_provider_repositories` - Получает список репозиториев
- `get_allowed_presets` - Получает доступные пресеты
- `get_deploy_settings` - Получает настройки деплоя по умолчанию

### Промпты:

- `create_app_prompt` - Помогает создать приложение
- `add_vcs_provider_prompt` - Помогает добавить VCS провайдер

## Важные замечания

⚠️ **После создания приложения через MCP сервер:**

1. **Настройте переменные окружения вручную** в панели Timeweb Cloud:
   - `TELEGRAM_BOT_TOKEN` - токен вашего бота
   - `ADMIN_ID` - ваш Telegram ID (опционально)
   - Другие переменные из `.env`

2. **Проверьте настройки деплоя:**
   - Команда запуска: `python main.py`
   - Рабочая директория
   - Переменные окружения

3. **Настройте подключение к Git репозиторию** (если нужно):
   - Добавьте VCS провайдер через `add_vcs_provider`
   - Подключите репозиторий к приложению

## Текущий статус проекта

⚠️ **Проект находится в экспериментальном режиме** и может содержать нестабильный функционал.

## Альтернативные методы развертывания

Если MCP сервер не работает или вы предпочитаете ручное развертывание:

1. **Через веб-консоль** - см. `DEPLOY_TIMEWEB.md`
2. **Через base64** - см. `UPDATE_FROM_LOCAL_PC.md`
3. **Через SSH/SCP** - см. инструкции в документации

## Полезные ссылки

- [Репозиторий MCP Server](https://github.com/timeweb-cloud/mcp-server)
- [Документация Timeweb Cloud API](https://timeweb.cloud/docs/)
- [Model Context Protocol](https://modelcontextprotocol.io/)

